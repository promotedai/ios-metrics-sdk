import Foundation

/**
 Entity IDs used to set the `*_id` fields in events.
 Used internally to track metadata. External interfaces should
 only expose the string values of these IDs.
 */
enum ID: Int, CustomStringConvertible {

  /// For proto completeness, platform code shouldn't set this value.
  case unknown = 0

  /// Explicitly set to null by platform code.
  case null = 1

  /// Explicitly set to empty string by platform code.
  case empty = 2

  /// Automatically generated by metrics library.
  case autogenerated(value: String) = 3

  /// Set to a specific value by platform code.
  case platformSpecified(value: String) = 4
}

extension ID {
  var protoValue: Event_IdentifierProvenance? {
    Event_IdentifierProvenance(rawValue: self.rawValue)
  }

  var stringValue: String? {
    switch self {
    case .unknown, .null: return nil
    case .empty: return ""
    case .autogenerated(let value): return value
    case .platformSpecified(let value): return value
    }
  }

  public var description: String {
    switch self {
    case .unknown: return "unknown"
    case .null: return "null"
    case .empty: return "empty"
    case .autogenerated(let value): return "auto(\(value))"
    case .platformSpecified(let value): return "platformSpecified(\(value))"
    }
  }
}
